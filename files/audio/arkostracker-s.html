<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Arkos Tracker Player - CPCtelera</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/prettify.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Arkos_Tracker_Player"></a>Arkos Tracker Player</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Arkos_Tracker_Player" >Arkos Tracker Player</a></td><td class=SDescription></td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Constants" >Constants</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#Arkos_Player_Compilation_Constants" >Arkos Player Compilation Constants</a></td><td class=SDescription>Constants used to control which features are enabled / disabled in the Arkos Tracker Player code. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#cpct_akp_musicPlay" >cpct_akp_musicPlay</a></td><td class=SDescription>Plays next music cycle of the present song with Arkos Tracker Player. </td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#cpct_akp_musicInit" >cpct_akp_musicInit</a></td><td class=SDescription>Sets up a music into Arkos Tracker Player to be played later on with <a href="#cpct_akp_musicPlay" class=LFunction id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">cpct_akp_musicPlay</a>.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#cpct_akp_stop" >cpct_akp_stop</a></td><td class=SDescription>Stops playing musing and sound effects on all 3 channels.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#cpct_akp_SFXGetInstrument" >cpct_akp_SFXGetInstrument</a></td><td class=SDescription>Returns the number of the instrument which is playing SFX in the selected channel (0 = Channel free / not playing SFX).</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#cpct_akp_SFXInit" >cpct_akp_SFXInit</a></td><td class=SDescription>Initializes sound effect instruments to be able to play sound effects.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#cpct_akp_SFXStopAll" >cpct_akp_SFXStopAll</a></td><td class=SDescription>Stops the reproduction of any sound effect in the 3 channels.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#cpct_akp_SFXPlay" >cpct_akp_SFXPlay</a></td><td class=SDescription>Plays a concrete sound effect, using the instruments of the &ldquo;SFX song&rdquo; given to <a href="#cpct_akp_SFXInit" class=LFunction id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">cpct_akp_SFXInit</a> when initializing sound effects.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#cpct_akp_SFXStop" >cpct_akp_SFXStop</a></td><td class=SDescription>Stops the reproduction sound FX on given channels</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#cpct_akp_setFadeVolume" >cpct_akp_setFadeVolume</a></td><td class=SDescription>Sets global volumes for creating fade in / out effects.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Constants"></a>Constants</h3></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="Arkos_Player_Compilation_Constants"></a>Arkos Player Compilation Constants</h3><div class=CBody><p>Constants used to control which features are enabled / disabled in the Arkos Tracker Player code.&nbsp; Changing them requires recompiling CPCtelera&rsquo;s library to take effect.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry><a name="PLY_UseSoundEffects"></a>PLY_UseSoundEffects</td><td class=CDLDescription>Set to 1 if you want to use Sound Effects in your player.&nbsp; Both CPU and memory consuming.&nbsp; It is set to 1 by default in CPCtelera.</td></tr><tr><td class=CDLEntry><a name="PLY_UseFades"></a>PLY_UseFades</td><td class=CDLDescription>Set to 1 to allow fades in / out.&nbsp; A little CPU and memory consuming.&nbsp; _cpct_akp_setFadeVolume becomes available.</td></tr><tr><td class=CDLEntry><a name="PLY_SystemFriendly"></a>PLY_SystemFriendly</td><td class=CDLDescription>Set to 1 if you want to save the Registers used by AMSDOS (AF&rsquo;, BC&rsquo;, IX, IY) which allows you to call this player in BASIC.&nbsp; As this option is system-friendly, it cuts interruptions, and restores them ONLY IF NECESSARY.&nbsp; It is set to 0 by default.&nbsp; However, IX and IY registers are always saved.</td></tr><tr><td class=CDLEntry><a name="PLY_RetrigValue"></a>PLY_RetrigValue</td><td class=CDLDescription>Value used to trigger the Re-trig of Register 13.&nbsp; 0xFE corresponds to &lsquo;CP xx&rsquo;.&nbsp; Do not change it!</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_musicPlay"></a>cpct_akp_musicPlay</h3><div class=CBody><p>Plays next music cycle of the present song with Arkos Tracker Player.&nbsp; Song has had to be previously established with <a href="#cpct_akp_musicInit" class=LFunction id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">cpct_akp_musicInit</a>.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_musicPlay" class=LFunction id=link4 onMouseOver="ShowTip(event, 'tt1', 'link4')" onMouseOut="HideTip('tt1')">cpct_akp_musicPlay</a> ()</p><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_musicPlay_asm</pre></blockquote><h4 class=CHeading>Details</h4><p>This function is to be called to start and continue playing the presently selected song with Arkos Tracker Player.&nbsp; Depending on the frequency at which the song were created, this function should be called 12, 25, 50, 100, 200 or 300 times per second.</p><p>Each time you call the function, it plays 1/frequency seconds.&nbsp; This means that you have to manually synchronize your calls to this function to have a stable music playing.&nbsp; If you call too fast or too slow you will either interrupt sound or have sound valleys.&nbsp; Therefore, you are responsible for calling this function with the most accurate timing possible, to get best sound results.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, AF&rsquo;, BC, DE, HL, IX, IY</p><h4 class=CHeading>Required memory</h4><p>1794 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2082 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">To be done</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_musicInit"></a>cpct_akp_musicInit</h3><div class=CBody><p>Sets up a music into Arkos Tracker Player to be played later on with <a href="#cpct_akp_musicPlay" class=LFunction id=link5 onMouseOver="ShowTip(event, 'tt1', 'link5')" onMouseOut="HideTip('tt1')">cpct_akp_musicPlay</a>.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_musicInit" class=LFunction id=link6 onMouseOver="ShowTip(event, 'tt3', 'link6')" onMouseOut="HideTip('tt3')">cpct_akp_musicInit</a> (void* <b>songdata</b>)</p><h4 class=CHeading>Input Parameters (2 bytes)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>(2B DE) songdata</td><td class=CDLDescription>Pointer to the start of the array containing song&rsquo;s data in AKS binary format</td></tr></table><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_musicInit_asm</pre></blockquote><h4 class=CHeading>Parameter Restrictions</h4><ul><li><b>songdata</b> must be an array containing dong&rsquo;s data in AKS binary format.&nbsp; Take into account that AKS binary format enforces a concrete start location in memory.&nbsp; Therefore, song must have been created in Arkos Tracker and exported to the same memory location that <b>songdata</b> points to.&nbsp; If you fail to locate the song at the same memory location it was exported for in Arkos Tracker, unexpected results will happen (Typically, noise will be played but, occasionally your program may hang or crash).</li></ul><h4 class=CHeading>Known limitations</h4><ul><li><b>songdata</b> must be the same memory address that the one given to Arkos Tracker when exporting song&rsquo;s binary.&nbsp; Arkos Tracker songs are created to be at a concrete memory location, due to optimization constraints.&nbsp; Therefore, this must be taken into account.&nbsp; If you wanted to change the memory location of the song, you should first open the song into Arkos Tracker and export it again with the new desired memory location.</li></ul><h4 class=CHeading>Details</h4><p>This function should be called fist to initialize the song that is to be played.&nbsp; The function reads the song header and sets up the player to start playing it.&nbsp; Once this process is done, <a href="#cpct_akp_musicPlay" class=LFunction id=link7 onMouseOver="ShowTip(event, 'tt1', 'link7')" onMouseOut="HideTip('tt1')">cpct_akp_musicPlay</a> should be called at the required frequency to continuously play the song.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, AF&rsquo;, BC, DE, HL, IX, IY</p><h4 class=CHeading>Required memory</h4><p>92 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">To be done</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_stop"></a>cpct_akp_stop</h3><div class=CBody><p>Stops playing musing and sound effects on all 3 channels.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_stop" class=LFunction id=link8 onMouseOver="ShowTip(event, 'tt4', 'link8')" onMouseOut="HideTip('tt4')">cpct_akp_stop</a> ()</p><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_stop_asm</pre></blockquote><h4 class=CHeading>Details</h4><p>This function stops the music and sound effects playing in the 3 channels.&nbsp; It can be later continued again calling <a href="#cpct_akp_musicPlay" class=LFunction id=link9 onMouseOver="ShowTip(event, 'tt1', 'link9')" onMouseOut="HideTip('tt1')">cpct_akp_musicPlay</a>.&nbsp; Please, take into account that sound effects cannot be played while music is stopped, as code for sound effects and music play is integrated.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, AF&rsquo;, BC, DE, HL, IX, IY</p><h4 class=CHeading>Required memory</h4><p>19 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">To be done</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_SFXGetInstrument"></a>cpct_akp_SFXGetInstrument</h3><div class=CBody><p>Returns the number of the instrument which is playing SFX in the selected channel (0 = Channel free / not playing SFX).</p><h4 class=CHeading>C Definition</h4><p><a href="../types-h.html#u16" class=LType id=link10 onMouseOver="ShowTip(event, 'tt5', 'link10')" onMouseOut="HideTip('tt5')">u16</a> <a href="#cpct_akp_SFXGetInstrument" class=LFunction id=link11 onMouseOver="ShowTip(event, 'tt6', 'link11')" onMouseOut="HideTip('tt6')">cpct_akp_SFXGetInstrument</a> (<a href="../types-h.html#u8" class=LType id=link12 onMouseOver="ShowTip(event, 'tt7', 'link12')" onMouseOut="HideTip('tt7')">u8</a> <b>channel_bitmask</b>)</p><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_SFXGetInstrument_asm</pre></blockquote><h4 class=CHeading>Details</h4><p>This function returns the number of the instrumeent which is playing in the given channel.&nbsp; You may use it to check the status of an FX reproduction.&nbsp; If this function returns a 0 it means that no SFX is playing on the channel (i.e. the channel is free for reproducing new SFXs).</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, HL</p><h4 class=CHeading>Required memory</h4><p>25 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">   Case    | Cycles | microSecs (us)
--------------------------------------
  Best     |   68   |  17.00
--------------------------------------
  Worst    |   82   |  20.50
--------------------------------------
Asm saving |  -28   |  -7.00
--------------------------------------</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_SFXInit"></a>cpct_akp_SFXInit</h3><div class=CBody><p>Initializes sound effect instruments to be able to play sound effects.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_SFXInit" class=LFunction id=link13 onMouseOver="ShowTip(event, 'tt2', 'link13')" onMouseOut="HideTip('tt2')">cpct_akp_SFXInit</a> (void* <b>sfx_song_data</b>)</p><h4 class=CHeading>Input Parameters (2 bytes)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>(2B DE) sfx_song_data</td><td class=CDLDescription>Pointer to the start of a song file containing instrument data for SFX</td></tr></table><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_SFXInit_asm</pre></blockquote><h4 class=CHeading>Parameter Restrictions</h4><ul><li><b>sfx_song_data</b> must be a song in binary AKS format.&nbsp; However, this song only needs to have instruments defined (there is not need for an actual &ldquo;song&rdquo; as a list of notes, patterns and others).&nbsp; Instruments will be set up for playing SFX later on with functions like <a href="#cpct_akp_SFXPlay" class=LFunction id=link14 onMouseOver="ShowTip(event, 'tt8', 'link14')" onMouseOut="HideTip('tt8')">cpct_akp_SFXPlay</a>.</li></ul><h4 class=CHeading>Details</h4><p>This function initializes instruments that will be used later on to play FX sounds at will using <a href="#cpct_akp_SFXPlay" class=LFunction id=link15 onMouseOver="ShowTip(event, 'tt8', 'link15')" onMouseOut="HideTip('tt8')">cpct_akp_SFXPlay</a>.&nbsp; In order for the instruments to be initialized, <b>sfx_song_data</b> must point to a song defined in AKS format.&nbsp; For the purpose of this function, the song only requires to have instruments defined in it, as patterns, notes and other information is not used for FX sounds.</p><p>You may use instruments from another song or a specific song containing instrument data only.&nbsp; Any song with instruments defined in it is valid to set up SFX with Arkos Tracker Player.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, DE, HL</p><h4 class=CHeading>Required memory</h4><p>14 bytes (+13 bytes from <a href="#cpct_akp_SFXStopAll" class=LFunction id=link16 onMouseOver="ShowTip(event, 'tt9', 'link16')" onMouseOut="HideTip('tt9')">cpct_akp_SFXStopAll</a> that comes next to this function and is used in initialization)</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">   Case    | Cycles | microSecs (us)
--------------------------------
   Any     |  146   |  36.50
--------------------------------
Asm saving |  -41   | -10.25
-------------------------------</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_SFXStopAll"></a>cpct_akp_SFXStopAll</h3><div class=CBody><p>Stops the reproduction of any sound effect in the 3 channels.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_SFXStopAll" class=LFunction id=link17 onMouseOver="ShowTip(event, 'tt9', 'link17')" onMouseOut="HideTip('tt9')">cpct_akp_SFXStopAll</a> ()</p><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_SFXStopAll_asm</pre></blockquote><h4 class=CHeading>Details</h4><p>This function stops all sound FX reproduction on all the 3 sound channels.</p><h4 class=CHeading>Destroyed Register values</h4><p>HL</p><h4 class=CHeading>Required memory</h4><p>13 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">   Case    | Cycles | microSecs (us)
--------------------------------
   Any     |   68   |  15.50
--------------------------------
Asm saving |    0   |   0
-------------------------------</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_SFXPlay"></a>cpct_akp_SFXPlay</h3><div class=CBody><p>Plays a concrete sound effect, using the instruments of the &ldquo;SFX song&rdquo; given to <a href="#cpct_akp_SFXInit" class=LFunction id=link18 onMouseOver="ShowTip(event, 'tt2', 'link18')" onMouseOut="HideTip('tt2')">cpct_akp_SFXInit</a> when initializing sound effects.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_SFXPlay" class=LFunction id=link19 onMouseOver="ShowTip(event, 'tt8', 'link19')" onMouseOut="HideTip('tt8')">cpct_akp_SFXPlay</a> (<a href="../types-h.html#u8" class=LType id=link20 onMouseOver="ShowTip(event, 'tt7', 'link20')" onMouseOut="HideTip('tt7')">u8</a> <b>sfx_num</b>, <a href="../types-h.html#u8" class=LType id=link21 onMouseOver="ShowTip(event, 'tt7', 'link21')" onMouseOut="HideTip('tt7')">u8</a> <b>volume</b>, <a href="../types-h.html#u8" class=LType id=link22 onMouseOver="ShowTip(event, 'tt7', 'link22')" onMouseOut="HideTip('tt7')">u8</a> <b>note</b>, <a href="../types-h.html#u8" class=LType id=link23 onMouseOver="ShowTip(event, 'tt7', 'link23')" onMouseOut="HideTip('tt7')">u8</a> <b>speed</b>, <a href="../types-h.html#u16" class=LType id=link24 onMouseOver="ShowTip(event, 'tt5', 'link24')" onMouseOut="HideTip('tt5')">u16</a> <b>inverted_pitch</b>, <a href="../types-h.html#u8" class=LType id=link25 onMouseOver="ShowTip(event, 'tt7', 'link25')" onMouseOut="HideTip('tt7')">u8</a> <b>channel_num</b>)</p><h4 class=CHeading>Input Parameters (7 bytes)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>(1B L ) sfx_num</td><td class=CDLDescription>Number of the instrument in the SFX Song (&gt;0), same as the number given to the instrument in Arkos Tracker.</td></tr><tr><td class=CDLEntry>(1B H ) volume</td><td class=CDLDescription>Volume [0-15], 0 = off, 15 = maximum volume.</td></tr><tr><td class=CDLEntry>(1B E ) note</td><td class=CDLDescription>Note to be played with the given instrument [0-143]</td></tr><tr><td class=CDLEntry>(1B D ) speed</td><td class=CDLDescription>Speed (0 = As original, [1-255] = new Speed (1 is fastest))</td></tr><tr><td class=CDLEntry>(2B BC) inverted_pitch</td><td class=CDLDescription>Inverted Pitch (-0xFFFF -&gt; 0xFFFF).&nbsp; 0 is no pitch.&nbsp; The higher the pitch, the lower the sound.</td></tr><tr><td class=CDLEntry>(1B A ) channel_num</td><td class=CDLDescription>Number of Channel where to reproduce the FX (0, 1, 2)</td></tr></table><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_SFXPlay_asm</pre></blockquote><h4 class=CHeading>Details</h4><p>Plays a given sound effect, along with the music, in a concrete channel and with some parameters (Volume, Note, Speed, Inverted Pitch).&nbsp; This lets you create lots of different (and potentially complex) sound effects from a set of instruments.&nbsp; In fact, you could play a song made of sound effect calls.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, BC, DE, HL,</p><h4 class=CHeading>Required memory</h4><p>95 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2077 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">   Case    | Cycles  | microSecs (us)
--------------------------------------
   Any     |     To be done
--------------------------------------
Asm saving |  -141   |  -45.25
--------------------------------------</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_SFXStop"></a>cpct_akp_SFXStop</h3><div class=CBody><p>Stops the reproduction sound FX on given channels</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_SFXStop" class=LFunction id=link26 onMouseOver="ShowTip(event, 'tt10', 'link26')" onMouseOut="HideTip('tt10')">cpct_akp_SFXStop</a> (<a href="../types-h.html#u8" class=LType id=link27 onMouseOver="ShowTip(event, 'tt7', 'link27')" onMouseOut="HideTip('tt7')">u8</a> <b>stop_bitmask</b>)</p><h4 class=CHeading>Input Parameters (1 byte)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>(1B A) stop_bitmask</td><td class=CDLDescription>A value where the 3 Least Significant Bits represent which channels to stop (bits enabled = channels to stop)</td></tr></table><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_SFXStop_asm</pre></blockquote><h4 class=CHeading>Parameter Restrictions</h4><ul><li><b>stop_bitmask</b> must be a value that operates as a set of enabled / disabled bits (a bitmask).&nbsp; Concretely, the 3 Least Significant bits, 2, 1 and 0 (xxxxx210) refer to Channels C, B and A respectively.&nbsp; Rest of the bits are ignored.&nbsp; Bits set to 1 mean that those channels will be stopped.&nbsp; Bits set to 0 mean that those channels are to be left as they are.</li></ul><h4 class=CHeading>Details</h4><p>This function lets you selectively stop sound FX reproduction on one, two or the 3 available channels.&nbsp; A <b>stop_bitmask</b> is given as parameter containing the information about what channels shall be stopped.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, HL</p><h4 class=CHeading>Required memory</h4><p>30 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2082 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">Case       | Cycles | microSecs (us)
--------------------------------
Best (0)   |  101   |  25.25
--------------------------------
Best (1)   |  149   |  37.25
--------------------------------
Asm saving |  -28   |  -7.00
--------------------------------</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="cpct_akp_setFadeVolume"></a>cpct_akp_setFadeVolume</h3><div class=CBody><p>Sets global volumes for creating fade in / out effects.</p><h4 class=CHeading>C Definition</h4><p>void <a href="#cpct_akp_setFadeVolume" class=LFunction id=link28 onMouseOver="ShowTip(event, 'tt11', 'link28')" onMouseOut="HideTip('tt11')">cpct_akp_setFadeVolume</a> (<a href="../types-h.html#u8" class=LType id=link29 onMouseOver="ShowTip(event, 'tt7', 'link29')" onMouseOut="HideTip('tt7')">u8</a> <b>volume</b>)</p><h4 class=CHeading>Input Parameters (1 byte)</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>(1B A) volume</td><td class=CDLDescription>Global volume for all channels, [0-15].&nbsp; 0 = max volume, 16 or more = no volume</td></tr></table><h4 class=CHeading>Assembly call (Input parameters on registers)</h4><blockquote><pre>call cpct_akp_setFadeVolume_asm</pre></blockquote><h4 class=CHeading>Parameter Restrictions</h4><ul><li><b>volume</b> must be a value in the range [0-15] for some meaning.&nbsp; Values greater than 15 mean no volume at all.&nbsp; 0 is the maximum volume, 15 the minimum.</li></ul><h4 class=CHeading>Details</h4><p>This function controls the global reproduction volume for all channels.&nbsp; This lets you do Fade in / out effects, by making the volume progressively go up or down.</p><h4 class=CHeading>Destroyed Register values</h4><p>AF, HL</p><h4 class=CHeading>Required memory</h4><p>15 bytes</p><p>However, take into account that all of Arkos Tracker Player&rsquo;s functions are linked and included, because they depend on each other.&nbsp; Total memory requirement is around 2082 bytes.</p><h4 class=CHeading>Time Measures</h4><blockquote><pre class="prettyprint">   Case    | Cycles | microSecs (us)
-------------------------------------
   Any     |   51   |  12.75
-------------------------------------
Asm saving |  -28   |   7.00
-------------------------------------</pre></blockquote><h4 class=CHeading>Credits</h4><p>This is a modification of the original <a href="http://www.grimware.org/doku.php/documentations/software/arkos.tracker/start" class=LURL target=_top>Arkos Tracker Player</a> code from Targhan / Arkos.&nbsp; Madram / Overlander and Grim / Arkos have also contributed to this source.</p></div></div></div>

</div><!--Content-->


<div id=Footer>&copy;opyright 2015 CPCtelera authors. Distributed under GNU GPL License.&nbsp; &middot;&nbsp; Last updated 2015/05/06&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>CPCtelera<div class=MSubTitle>Reference Manual &amp; Documentation</div></div><div class=MEntry><div class=MLink><a href="https://github.com/lronaldo/cpctelera">CPCtelera at Github</a></div></div><div class=MEntry><div class=MText>______________________________________________________________________</div></div><div class=MEntry><div class=MFile><a href="../types-h.html">Aliases for builtin types</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Audio</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="arkosplayer-txt.html">Arkos Player Technicals</a></div></div><div class=MEntry><div class=MFile id=MSelected>Arkos Tracker Player</div></div><div class=MEntry><div class=MFile><a href="audio-h.html">Audio Channels (bitmasks)</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Bitarray</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="../bitarray/cpct_get2Bits-s.html">cpct_get2Bits</a></div></div><div class=MEntry><div class=MFile><a href="../bitarray/cpct_get4Bits-s.html">cpct_get4Bits</a></div></div><div class=MEntry><div class=MFile><a href="../bitarray/cpct_getBit-s.html">cpct_getBit</a></div></div><div class=MEntry><div class=MFile><a href="../bitarray/cpct_set2Bits-s.html">cpct_set2Bits</a></div></div><div class=MEntry><div class=MFile><a href="../bitarray/cpct_set4Bits-s.html">cpct_set4Bits</a></div></div><div class=MEntry><div class=MFile><a href="../bitarray/cpct_setBit-s.html">cpct_setBit</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Firmware</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="../firmware/cpct_disableFirmware-s.html">cpct_disableFirmware</a></div></div><div class=MEntry><div class=MFile><a href="../firmware/cpct_reenableFirmware-s.html">cpct_reenableFirmware</a></div></div><div class=MEntry><div class=MFile><a href="../firmware/cpct_enableDisableROMs-s.html">Enabling / disabling ROMs</a></div></div><div class=MEntry><div class=MFile><a href="../firmware/firmware-s.html">Firmware&amp;ROM variables</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">Keyboard</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MFile><a href="../keyboard/cpct_isKeyPressed-s.html">cpct_isKeyPressed</a></div></div><div class=MEntry><div class=MFile><a href="../keyboard/cpct_scanKeyboard-s.html">cpct_scanKeyboard</a></div></div><div class=MEntry><div class=MFile><a href="../keyboard/cpct_scanKeyboard_f-s.html">cpct_scanKeyboard_f</a></div></div><div class=MEntry><div class=MFile><a href="../keyboard/keyboard-h.html">Keyboard Mappings&amp;Constants</a></div></div><div class=MEntry><div class=MFile><a href="../keyboard/keyboard-txt.html">Keyboard Technicals</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Sprites</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawSolidBox-s.html">cpct_drawSolidBox</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawSprite-s.html">cpct_drawSprite</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawSpriteMasked-s.html">cpct_drawSpriteMasked</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawTileAligned2x8-s.html">cpct_drawTileAligned2x8</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawTileAligned2x8_f-s.html">cpct_drawTileAligned2x8_f</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawTileAligned4x8-s.html">cpct_drawTileAligned4x8</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_drawTileAligned4x8_f-s.html">cpct_drawTileAligned4x8_f</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_memset-s.html">cpct_memset</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_px2byteM0-s.html">cpct_px2byteM0</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/cpct_px2byteM1-s.html">cpct_px2byteM1</a></div></div><div class=MEntry><div class=MFile><a href="../sprites/sprites-h.html">Sprite Macros&amp;Constants</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent6')">Strings</a><div class=MGroupContent id=MGroupContent6><div class=MEntry><div class=MFile><a href="../strings/cpct_drawCharM0-s.html">cpct_drawCharM0</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawCharM1-s.html">cpct_drawCharM1</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawCharM1_f-s.html">cpct_drawCharM1_f</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawCharM2-s.html">cpct_drawCharM2</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawStringM0-s.html">cpct_drawStringM0</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawStringM1-s.html">cpct_drawStringM1</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawStringM1_f-s.html">cpct_drawStringM1_f</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_drawStringM2-s.html">cpct_drawStringM2</a></div></div><div class=MEntry><div class=MFile><a href="../strings/cpct_putChar-s.html">putchar</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent7')">Video</a><div class=MGroupContent id=MGroupContent7><div class=MEntry><div class=MFile><a href="../video/cpct_count2VSYNC-s.html">cpct_count2VSYNC</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_fw2hw-s.html">cpct_fw2hw</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_getHWColor-s.html">cpct_getHWColour</a></div></div><div class=MEntry><div class=MFile><a href="../video/videomode-h.html">cpct_setBorder</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_setPALColour-s.html">cpct_setPALColour</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_setPalette-s.html">cpct_setPalette</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_setVideoMemoryOffset-s.html">cpct_setVideoMemoryOffset</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_setVideoMemoryPage-s.html">cpct_setVideoMemoryPage</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_setVideoMode-s.html">cpct_setVideoMode</a></div></div><div class=MEntry><div class=MFile><a href="../video/cpct_waitVSYNC-s.html">cpct_waitVSYNC</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent8')">Index</a><div class=MGroupContent id=MGroupContent8><div class=MEntry><div class=MIndex><a href="../../index/Constants.html">Constants</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Macros.html">Macros</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Types.html">Types</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Variables.html">Variables</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Constants">Constants</option><option value="Functions">Functions</option><option value="Macros">Macros</option><option value="Types">Types</option><option value="Variables">Variables</option></select></div><script language=JavaScript><!--
HideAllBut([1, 2], 9);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction>Plays next music cycle of the present song with Arkos Tracker Player. </div></div><div class=CToolTip id="tt2"><div class=CFunction>Initializes sound effect instruments to be able to play sound effects.</div></div><div class=CToolTip id="tt3"><div class=CFunction>Sets up a music into Arkos Tracker Player to be played later on with cpct_akp_musicPlay.</div></div><div class=CToolTip id="tt4"><div class=CFunction>Stops playing musing and sound effects on all 3 channels.</div></div><div class=CToolTip id="tt5"><div class=CType>unsigned int       (u16 = unsigned 16-bits, 2 bytes)</div></div><div class=CToolTip id="tt6"><div class=CFunction>Returns the number of the instrument which is playing SFX in the selected channel (0 = Channel free / not playing SFX).</div></div><div class=CToolTip id="tt7"><div class=CType>unsigned char      (u8  = unsigned  8-bits, 1 byte )</div></div><div class=CToolTip id="tt8"><div class=CFunction>Plays a concrete sound effect, using the instruments of the &ldquo;SFX song&rdquo; given to cpct_akp_SFXInit when initializing sound effects.</div></div><div class=CToolTip id="tt9"><div class=CFunction>Stops the reproduction of any sound effect in the 3 channels.</div></div><div class=CToolTip id="tt10"><div class=CFunction>Stops the reproduction sound FX on given channels</div></div><div class=CToolTip id="tt11"><div class=CFunction>Sets global volumes for creating fade in / out effects.</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>